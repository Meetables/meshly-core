openapi: 3.0.3 
info:
  title: meshly-core API
  version: '1.0.0'
  description: |
    The powerful and extensive backend making it easy to create Social Networks
externalDocs:
  description: Meetables GitHub
  url: https://github.com/Meetables
servers:
  - url: https://localhost:3000/
tags:
  - name: Authentication
    description: Auth stuff
  - name: Profile
    description: User details
  - name: Discover
    description: Socialize
  - name: Extensions
    description: Core features of meetables
  - name: Admin
    description: Administration of meetables data
paths:
  /api/v1/auth/login:
    post:
      tags:
        - Authentication
      summary: Login
      requestBody:
        description: Login data
        required: true
        content:
          application/json:    
            schema:
              $ref: '#/components/schemas/LoginRequest'
      responses:
        200:
          $ref: '#/components/responses/LoginSuccess'
        400:
          description: Missing fields
        404:
          description: Incorrect credentials
        500:
          description: Internal server error
              
  /api/v1/auth/signup:
    post:
      tags:
        - Authentication
      summary: Sign up
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SignupRequest'
      responses:
        201:
          $ref: '#/components/responses/SignupSuccess'
        400:
          description: Missing fields or wrong format
        409:
          description: Username oder email already exists
        500:
          description: Internal server error
                
  /api/v1/auth/logout:
    post:
      tags:
        - Authentication
      summary: Logout
      responses:
        204:
          description: Successful logout (deletes the JWT cookie) and returns a confirmation message.
        500:
          description: Internal server error

  /api/v1/auth/test:
    post:
      tags:
        - Authentication
      summary: Test route that requires JWT authentication
      description: |
        Protected endpoint which requires the 'jwt-meshlycore' cookie with a valid token.
        The JWT is verified using middleware before accessing this endpoint.
      security:
        - jwtCookie: []
      responses:
        200:
          description: Authorized successfully.
          content:
            application/json:
              schema:
                type: object
                properties:
                  authorized:
                    type: string
                    example: "true"
        401:
          description: Unauthorized - Missing or invalid JWT cookie.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        404:
          description: User not found.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        500:
          description: Internal server error.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/discover/tags:
    get:
      tags:
        - Discover
      summary: Get all tags from the database
      description: |
        Protected endpoint which requires the 'jwt-meshlycore' cookie with a valid token.
        The JWT is verified using middleware before accessing this endpoint.
      security:
        - jwtCookie: []
      responses:
        200:
          description: 'Success'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TagResponse'
        401:
          description: Unauthorized
        404:
          description: User not found
        500:
          description: Internal server error
  
  /api/v1/discover/profile:
    get:
      tags:
        - Discover
      summary: Get Public Profile Data
      description: |
        Protected endpoint for retrieving public profile data by username.  
        Requires the 'jwt-meshlycore' cookie with a valid token.  
        Returns the public profile information (username, displayName, profileDescription, profileTags) for the given username.
      security:
        - jwtCookie: []
      requestBody:
        description: Request containing the username whose public profile data is needed.
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
              properties:
                username:
                  type: string
                  example: "johnDoe"
      responses:
        200:
          description: Public profile data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoverProfileResponse'
        400:
          description: Username is required
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        500:
          description: Internal server error
  
  /api/v1/discover/user-suggestions:
    get:
      tags:
        - Discover
      summary: Get suggestions for other user profiles to socialize with.
      description: |
        Long-term suggestions for users with matching tags. The matching score is calculated
        by the number of overlapping tags.
      requestBody:
        required: true
        content:
          application/json:    
            schema:
              $ref: '#/components/schemas/GetUserSuggestionsRequest'   
      security:
        - jwtCookie: []
      responses:
        200:
          description: List of recommendations
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/DiscoverUserSuggestionResponse'
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        500:
          description: Internal Server error

  /api/v1/discover/profile-picture:
    get:
      tags:
        - Discover
      summary: Get user profile picture
      description: |
        Retrieves a user's profile picture from storage.  
        If no userId is provided, returns the authenticated user's profile picture.  
        If userId is provided, returns the specified user's profile picture.  
        Requires authentication via JWT cookie.
      security:
        - jwtCookie: []
      parameters:
        - in: query
          name: userId
          schema:
            type: string
          required: false
          description: |
            The ID of the user whose profile picture to retrieve.  
            If not provided, returns the authenticated user's profile picture.
          example: "60d5ec49f1b2c8b1f8e4e123"
      responses:
        '200':
          description: Profile picture retrieved successfully
          content:
            image/jpeg:
              schema:
                type: string
                format: binary
            image/png:
              schema:
                type: string
                format: binary
            image/gif:
              schema:
                type: string
                format: binary
            image/webp:
              schema:
                type: string
                format: binary
          headers:
            Content-Type:
              description: MIME type of the image
              schema:
                type: string
                example: "image/jpeg"
            Content-Length:
              description: Size of the image in bytes
              schema:
                type: integer
                example: 2048576
        '400':
          description: Bad request - Missing userId when not authenticated
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Missing userId"
        '401':
          description: Unauthorized - Missing or invalid JWT cookie
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Profile picture not found
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Profile picture not found"
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Internal server error"

  /api/v1/profile/me:
    get:
      summary: get user data
      tags:
        - Profile
      security:
        - jwtCookie: []
      responses:
        200:
          description: Successful retrieval of authenticated user profile
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ProfileMeResponse'
        401:
          description: Unauthorized - Missing or invalid JWT
        404:
          description: User not found
        500:
          description: Internal server error
  /api/v1/profile/public-profile:
    get:
      summary: get public profile data
      tags:
        - Profile
      security:
        - jwtCookie: []
      responses:
        200:
          description: User onboarded successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PublicProfileResponse'
        401:
          description: Unauthorized - Missing or invalid JWT
        404:
          description: User not found
        500:
          description: Internal server error
  /api/v1/profile/onboarding:
    post:
      summary: Onboard user
      description: |
        This endpoint allows onboarding a user by setting their display name, tags, and profile description.  
        Requires a valid JWT cookie (`jwt-meshlycore`).  
        A user can only be onboarded once ‚Äî if profile data already exists, this will return a 409.
      tags:
        - Profile
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OnboardUserRequest'
      responses:
        204:
          description: User onboarded successfully
        400:
          description: Missing or invalid fields
        409:
          description: User already onboarded
        500:
          description: Internal server error

  /api/v1/profile/ignore-profile:
    post:
      tags:
        - Profile
      summary: Ignore a suggested profile
      description: |
        Protected endpoint to ignore a suggested user profile.  
        Requires a valid 'jwt-meshlycore' cookie.  
        The specified user will be added to the list of ignored recommendations.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsernameDto'
      responses:
        204:
          description: Profile successfully ignored
        400:
          description: Username missing
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        500:
          description: Internal server error

  /api/v1/profile/create-story:
    post:
      tags:
        - Profile
      summary: Create a new story
      description: |
        Protected endpoint to create a new story.  
        Requires a valid 'jwt-meshlycore' cookie.  
        The story will be created and associated with the authenticated user.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - title
                - content
              properties:
                title:
                  type: string
                  example: "My First Story"
                content:
                  type: string
                  example: "This is the content of my first story."
      responses:
        '200':
          description: Story created successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: Story has been created successfully.
        '400':
          description: Bad request - Missing or invalid fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Missing or invalid JWT cookie
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/profile/send-friend-request:
    post:
      tags:
        - Profile
      summary: Send a friend request
      description: |
        Protected endpoint to send a friend request to another user.  
        Requires a valid 'jwt-meshlycore' cookie.  
        The friend request will be sent to the specified username.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsernameDto'
      responses:
        204:
          description: Friend request sent successfully
        400:
          description: Username missing or invalid
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        409:
          description: Already friends or already sent friend request
        418:
          description: Don't be friend with yourself!
        500:
          description: Internal server error

  /api/v1/profile/respond-to-friend-request:
    post:
      tags:
        - Profile
      summary: Respond to a friend request
      description: |
        Protected endpoint to respond to a friend request.  
        Requires a valid 'jwt-meshlycore' cookie.  
        The response will be sent to the specified username.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RespondToFriendRequestRequest'
      responses:
        204:
          description: Friend request response sent successfully, notification sent to target user
        400:
          description: Bad request - Missing or invalid fields
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found or no pending friend requests
        500:
          description: Internal server error

  /api/v1/profile/friend-requests:
    get:
      tags:
        - Profile
      summary: Get pending friend requests associated with the authenticated user
      description: |
        Protected endpoint to retrieve pending friend requests for the authenticated user.  
        Requires a valid 'jwt-meshlycore' cookie.
      security:
        - jwtCookie: []
      responses:
        200:
          description: Pending friend requests retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/FriendRequestsResponse'
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        500:
          description: Internal server error

  /api/v1/profile/notifications:
    get:
      tags:
        - Profile
      summary: Get notifications
      description: |
        Protected endpoint to retrieve notifications for the authenticated user.  
        Requires a valid 'jwt-meshlycore' cookie.
      security:
        - jwtCookie: []
      responses:
        200:
          description: Notifications retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/NotificationsResponse'
        401:
          description: Unauthorized - Missing or invalid JWT cookie
        404:
          description: User not found
        500:
          description: Internal server error

  /api/v1/profile/upload-profile-pic:
    post:
      tags:
        - Profile
      summary: Upload user profile picture
      description: |
        Protected endpoint to upload a profile picture for the authenticated user.  
        Requires a valid 'jwt-meshlycore' cookie.  
        Accepts image files and uploads them to the file storage backend.
        The uploaded file replaces any existing profile picture.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              required:
                - profilePicture
              properties:
                profilePicture:
                  type: string
                  format: binary
                  description: Image file for the profile picture
            encoding:
              profilePicture:
                contentType: image/png, image/jpeg, image/jpg, image/gif, image/webp
      responses:
        '200':
          description: Profile picture uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Profile picture uploaded"
                  key:
                    type: string
                    example: "profile-pictures/60d5ec49f1b2c8b1f8e4e123"
                    description: Storage key for the uploaded file
                  url:
                    type: string
                    example: "https://meetables-api-endpoint/api/v1/discover/profile-picture?userId=60d5ec49f1b2c8b1f8e4e123"
                    description: Public URL to access the uploaded profile picture
        '400':
          description: Bad request - Missing file or user ID
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Missing file or user ID"
        '401':
          description: Unauthorized - Missing or invalid JWT cookie
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Internal server error"

  /api/v1/extensions/get-availability:
    get:
      tags:
        - Extensions
      summary: Get user's weekly availability
      description: |
        Retrieves the availability time ranges for each day of the week as set by the user.  
        Requires a valid 'jwt-meshlycore' cookie.
      security:
        - jwtCookie: []
      responses:
        200:
          description: Availability retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  availability:
                    type: object
                    properties:
                      mon:
                        type: string
                        example: "12:00-21:00"
                      tue:
                        type: string
                        example: "12:00-21:00"
                      wed:
                        type: string
                        example: "12:00-21:00"
                      thu:
                        type: string
                        example: "12:00-21:00"
                      fri:
                        type: string
                        example: "12:00-21:00"
                      sat:
                        type: string
                        example: "12:00-21:00"
                      sun:
                        type: string
                        example: "12:00-21:00"
        401:
          description: Unauthorized - Missing or invalid JWT cookie
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        404:
          description: Availability not set
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/extensions/set-availability:
    post:
      tags:
        - Extensions
      summary: Set weekly availability
      description: Set user's availability for each day of the week using time ranges like "12:00-21:00".
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                mon:
                  type: string
                  example: "12:00-21:00"
                tue:
                  type: string
                  example: "12:00-21:00"
                wed:
                  type: string
                  example: "12:00-21:00"
                thu:
                  type: string
                  example: "12:00-21:00"
                fri:
                  type: string
                  example: "12:00-21:00"
                sat:
                  type: string
                  example: "12:00-21:00"
                sun:
                  type: string
                  example: "12:00-21:00"
      responses:
        200:
          description: Availability set successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Availability set successfully"
        400:
          description: Missing availability data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/extensions/meeting-lookup:
    post:
      tags:
        - Extensions
      summary: Trigger meeting lookup and send meeting requests
      description: |
        Uses profile tag matching and user availability to send meeting requests.
        Requires JWT in Authorization header.
      security:
        - jwtCookie: []
      requestBody:
        description: requires last location
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - lastLocation
              properties:
                lastLocation:
                  type: string
                  description: The responder‚Äôs last known location as "lat,lng"
                  example: "48.8566,2.3522"
      responses:
        200:
          description: Result of the meeting lookup
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Meeting requests sent successfully"
                  availableUserCounter:
                    type: integer
                    example: 3
                  error:
                    type: string
                    nullable: true
        400:
         description: Either no lastLocation has been passed to the function or the user doesn't have a required tag attached to his profile
         content:
          application/json:
            schema:
              $ref: '#/components/schemas/ErrorResponse'
   
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
   
  /api/v1/extensions/accept-instant-meeting-request:
    post:
      tags:
        - Extensions
      summary: Accept an instant meeting request
      description: |
        Accepts a pending instant meeting request,
        computes a meeting point, and notifies the requester.
      security:
        - jwtCookie: []
      requestBody:
        description: Request ID of the instant meet request and the responder‚Äôs current location
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requestId
                - location
              properties:
                requestId:
                  type: string
                  description: friendRequest ID
                  example: "67f2ddf33d708e12caf2e143"
                location:
                  type: string
                  description: The responder‚Äôs last known location as "lat,lng"
                  example: "48.8566,2.3522"
      responses:
        '200':
          description: Instant meet request accepted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Instant meet request accepted"
                  requestId:
                    type: string
                    example: "67f2ddf33d708e12caf2e143"
                  meetingLocation:
                    type: object
                    description: The calculated meeting location (format depends on your implementation)
                    example: { "lat": 48.8584, "lng": 2.2945 }
        '400':
          description: Missing required fields
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Request or sender location not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '406':
          description: An instant meeting is already taking place
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/extensions/send-meeting-request:
    post:
      tags:
        - Extensions
      summary: Send a meeting request
      description: |
        Sends a meeting request from the authenticated user to another user at a specified time and location.
        Requires a valid `jwt-meshlycore` cookie.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - username
                - datetime
                - lat
                - lon
              properties:
                username:
                  type: string
                  description: The target user's username
                  example: "john_doe"
                datetime:
                  type: string
                  format: date-time
                  description: ISO 8601 timestamp for the meeting (UTC)
                  example: "2025-06-10T15:00:00Z"
                lat:
                  type: number
                  description: Latitude of the meeting location (‚àí90 to 90)
                  example: 48.8566
                lon:
                  type: number
                  description: Longitude of the meeting location (‚àí180 to 180)
                  example: 2.3522
      responses:
        204:
          description: Meeting request sent successfully (no content)
        400:
          description: Missing or invalid fields (username, datetime, lat, lon)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

        404:
          description: User not found or invalid username
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        418:
          description: Can't send a meeting request to yourself
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/extensions/respond-to-meeting-request:
    post:
      tags:
        - Extensions
      summary: Respond to a meeting request
      description: |
        Accepts or rejects a pending meeting request and optionally provides suggested location (lat/lon) and/or time.
        Suggestions must be provided as a JSON‚Äêencoded string.
        Requires a valid 'jwt-meshlycore' cookie.
      security:
        - jwtCookie: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - requestId
                - result
              properties:
                requestId:
                  type: string
                  description: The ID of the FriendRequest to respond to
                  example: "67f2ddf33d708e12caf2e143"
                result:
                  type: string
                  description: Whether the request is accepted or rejected
                  enum:
                    - accepted
                    - rejected
                  example: "accepted"
                suggestions:
                  type: string
                  description: >
                    JSON‚Äêencoded object with optional fields:
                      ‚Ä¢ lat (number)  
                      ‚Ä¢ lon (number)  
                      ‚Ä¢ time (ISO 8601 string)  
                    e.g. '{"lat":48.8584,"lon":2.2945,"time":"2025-06-09T15:00:00Z"}'
      responses:
        204:
          description: Meeting request response recorded successfully, no content
        400:
          description: Missing required fields or invalid suggestions format
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        404:
          description: Meeting request not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'


components:
  securitySchemes:
    jwtCookie:
      type: apiKey
      in: cookie
      name: jwt-meshlycore
  schemas:
    LoginRequest:
      type: object
      properties:
        email:
          type: string
          example: "mail@meetables.com"
        password:
          type: string
          example: "12345678"
      required:
        - email
        - password
    LoginResponse:
      type: object
      properties:
        success:
          type: boolean
        user:
          $ref: '#/components/schemas/UserDto'
    SignupRequest:
      type: object
      properties:
        email:
          type: string
          example: "mail@meetables.com"
        password:
          type: string
          example: "12345678"
        username:
          type: string
          example: "user"
      required:
        - email
        - password
        - username
    SignupResponse:
      type: object
      properties:
        success:
          type: boolean
        user:
          $ref: '#/components/schemas/UserDto'
    ErrorResponse:
      type: object
      properties:
        message:
          type: string
    UserDto:
      type: object
      properties:
        _id:
          type: string
          example: "6832e6f9b2e85233e9f62a82"
        username:
          type: string
          example: "testuser3"
        email:
          type: string
          example: "testuser3@example.com"
        displayName:
          type: string
          example: "testuser3"
        profileDescription:
          type: string
          example: "just a bot"
        profileTags:
          type: array
          items:
            type: string
          example:
            - "64d5f28f4b8f2b7b4c1f2a7e"
            - "64d5f28f4b8f2b7b4c1f2a7f"
        ignoredUserIds:
          type: array
          items:
            type: string
          example:
            - "64d5f28f4b8f2b7b4c1f2a80"
            - "64d5f28f4b8f2b7b4c1f2a81"
        friendUserIds:
          type: array
          items:
            type: string
          example:
            - "64d5f28f4b8f2b7b4c1f2a82"
            - "6832e6f9b2e85233e9f62a82"
        lastLocation:
          $ref: '#/components/schemas/LocationDto'
        __v:
          type: integer
          example: 4
    LocationDto:
      type: object
      required:
        - lat
        - lng
      properties:
        lat:
          type: number
          example: 48.12872785130619
        lng:
          type: number
          example: 11.59184340149795
    UsernameDto:
      type: object
      required:
        - username
      properties:
        username:
          type: string
          example: "example_user_123"
    NotificationsResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        notifications:
          type: array
          items:
            $ref: '#/components/schemas/NotificationDto'
    NotificationDto:
      type: object
      properties:
        _id:
          type: string
          example: "6832e6f9b2e85233e9f62aab"
        type:
          type: string
          example: "instant_meet_request"
          enum:
            - instant_meet_request
            - meet_request
            - instant_meet_result_accepted
            - instant_meet_result_rejected
        pending:
          type: boolean
          example: true
        content:
          type: string
          example: "6832e6f9b2e85233e9f62aa2"
        timestamp:
          type: string
          format: date-time
          example: "2025-05-25T09:46:33.638Z"
    DiscoverUserSuggestionResponse:
      type: object
      required:
        - success
        - recommendations
      properties:
        success:
          type: boolean
          example: true
        recommendations:
          type: array
          items:
            type: object
            required:
              - user
              - score
            properties:
              username:
                type: string
                description: Username of the recommended user
                example: "alice123"
              score:
                type: number
                description: Weight or score of the recommendation
                example: 0.85
                minimum: 0
                maximum: 1
              type:
                type: object
                description: Flags to indicate "new" or "hot" status
                properties:
                  new:
                    type: boolean
                    example: true
                    description: User is freshly registered
                  hot:
                    type: boolean
                    example: true
                    description: High matching score
    ProfileMeResponse:
      type: object
      required:
        - success
        - user
      properties:
        success:
          type: boolean
          example: true
        user:
          $ref: '#/components/schemas/UserDto'
    PublicProfileResponse:
      type: object
      required:
        - success
        - user
      properties:
        success:
          type: boolean
          example: true
        user:
          $ref: '#/components/schemas/PublicProfileDto'
    RespondToFriendRequestRequest:
      type: object
      required:
        - username
        - status
      properties:
        username:
          type: string
          example: "friend_user"
        status:
          type: string
          enum:
            - accepted
            - rejected
    FriendRequestsResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        friendRequests:
          type: array
          required:
            - isSender
            - involvedUserUsername
            - pending
            - comment
            - timestamp
          items:
            type: object
            properties:
              isSender:
                type: boolean
                example: true
              involvedUserUsername:
                type: string
                example: "friend_user"
              result:
                type: string
                enum: [ "rejected", "accepted" ]
              pending:
                type: boolean
                example: true
              comment:
                type: string
                example: "Friend request from friend_user"
              timestamp:
                type: string
                format: date-time
                example: "2023-10-01T12:00:00Z"
    OnboardUserRequest:
      type: object
      required:
        - displayName
        - profileTagIds
        - profileDescription
      properties:
        displayName:
          type: string
          example: "JaneDoe"
        profileTagIds:
          type: array
          items:
            type: string
          example: ["tagId1", "tagId2"]
        profileDescription:
          type: string
          example: "Hi, I'm Jane and I love hiking and building communities."
    GetUserSuggestionsRequest:
      type: object
      required: 
        - max_suggestions
      properties: 
        max_suggestions:
          type: number
          example: 5
          minimum: 1
    TagResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        data:
          type: array
          items:
            type: object
            required:
              - _id
              - name
              - category
              - icon
            properties:
              _id:
                type: string
                example: "60f7c8573e843b001c8e4b9a"
              name:
                type: string
                example: "Hiking"
              de_name:
                type: string
                example: "Wandern"
              category:
                type: string
                example: "Activity"
              icon:
                type: string
                example: "üèîÔ∏è"
              superiorTagId:
                type: string
                example: "60f7c8573e843b001c8e4b91"
    DiscoverProfileResponse:
      type: object
      properties:
        success:
          type: boolean
          example: true
        user:
          $ref: '#/components/schemas/PublicProfileDto'
    PublicProfileDto:
      type: object
      required:
        - username
        - displayName
        - profileDescription
        - profileTags
      properties:
        username:
          type: string
          example: "johnDoe"
        displayName:
          type: string
          example: "John Doe"
        profileDescription:
          type: string
          example: "Just another social media enthusiast."
        profileTags:
          type: array
          items:
            type: string
          example:
            - "64d5f28f4b8f2b7b4c1f2a7e"
            - "64d5f28f4b8f2b7b4c1f2a7f"

  responses:
    LoginSuccess:
      description: Successful Login with JWT cookie set.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/LoginResponse'
      headers:
        Set-Cookie:
          description: JWT authentication cookie.
          schema:
            type: string
          example: 'jwt-meshlycore=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9; Max-Age=1296000; HttpOnly; SameSite=Strict; Secure'
    SignupSuccess:
      description: Successful Signup with JWT cookie set.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SignupResponse'
      headers:
        Set-Cookie:
          description: JWT authentication cookie.
          schema:
            type: string
          example: 'jwt-meshlycore=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9; Max-Age=1296000; HttpOnly; SameSite=Strict; Secure'
